{"version":3,"file":"index.js","sources":["../src/constants/constants.js","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export const refs = {\n  gallery: document.querySelector('.gallery'),\n  form: document.querySelector('.query-form'),\n  loader: document.querySelector('.loader'),\n};\n\nexport const PX_API_KEY = \"46619732-3197f14e6c8435a9c5454ac04\"\n\nexport const STORAGE_KEY = \"query\";\n\nexport const simpleLightboxOptions = {\n  overlay: true,\n  overlayOpacity: 1,\n  captions: true,\n  captionPosition: 'bottom',\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionDelay: 250,\n};","import { PX_API_KEY } from '../constants/constants.js';\n\nconst BASE_URL = 'https://pixabay.com/api';\n\n\nexport function getPhotos(query) {\n  const params = new URLSearchParams({\n    key: PX_API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n\n  return fetch(`${BASE_URL}/?${params}`)\n    .then(res => {\n      if (!res.ok) {\n        throw new Error(res.statusText);\n      }\n      return res.json();\n    });\n}","export function renderGallery(cards) {\n    return cards\n        .map(({ webformatURL, tags, likes, views, comments, downloads, largeImageURL }) =>\n            `\n            <li class=\"gallery-card\">\n                <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                    <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" height=312 width=200>\n                    <ul class=\"statistics\">\n                        <li class=\"stat-element\">\n                            <p class=\"stat-name\">Likes</p>\n                            <p class=\"stat-value\">${likes}</p>\n                        </li>\n\n                        <li class=\"stat-element\">\n                            <p class=\"stat-name\">Views</p>\n                            <p class=\"stat-value\">${views}</p>\n                        </li>\n\n                        <li class=\"stat-element\">\n                            <p class=\"stat-name\">Comments</p>\n                            <p class=\"stat-value\">${comments}</p>\n                        </li>\n\n                        <li class=\"stat-element\">\n                            <p class=\"stat-name\">Downloads</p>\n                            <p class=\"stat-value\">${downloads}</p>\n                        </li>\n                    </ul>\n                </a>\n            </li>\n      `\n        )\n        .join(\"\");\n}","import { refs, simpleLightboxOptions, STORAGE_KEY } from './constants/constants.js';\nimport { getPhotos } from './js/pixabay-api.js';\nimport { renderGallery } from './js/render-functions.js';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\n\nlet query = fillFormFields(refs.form);\n\nrefs.form.addEventListener('input', handleFormInput);\nrefs.form.addEventListener('submit', handleSearch);\nconst simpleLightBox = new SimpleLightbox('.gallery li a', simpleLightboxOptions);\n\nfunction handleFormInput(e) {\n  query = e.target.value.trim();\n  localStorage.setItem(STORAGE_KEY, query);\n}\n\n\nfunction handleSearch(e) {\n  e.preventDefault();\n  if (!query) return;\n\n  refs.gallery.innerHTML = '';\n  refs.loader.style.display = 'block';\n\n  getPhotos(query)\n    .then(({ hits }) => {\n      refs.loader.style.display = 'none';\n      if (hits.length) {\n        refs.gallery.innerHTML = renderGallery(hits);\n        simpleLightBox.refresh();\n      }\n      else {\n        iziToast.warning({ message: 'Sorry, there are no images matching your search query. Please try again!', position: 'topRight' });\n      }\n\n    })\n    .catch((error) => {\n      iziToast.error({ message: 'There was an error while loading pictures. Please try again!', position: 'topRight' });\n      console.error(error);\n    })\n    .finally(() => {\n      query = '';\n      localStorage.removeItem(STORAGE_KEY);\n      refs.form.reset();\n    });\n}\n\n\nfunction fillFormFields(form) {\n  const localStorageData = localStorage.getItem(STORAGE_KEY);\n  if (!localStorageData) return;\n\n  form.elements.query.value = localStorageData;\n  return localStorageData || '';\n}"],"names":["refs","PX_API_KEY","STORAGE_KEY","simpleLightboxOptions","BASE_URL","getPhotos","query","params","res","renderGallery","cards","webformatURL","tags","likes","views","comments","downloads","largeImageURL","fillFormFields","handleFormInput","handleSearch","simpleLightBox","SimpleLightbox","e","hits","iziToast","error","form","localStorageData"],"mappings":"6vBAAO,MAAMA,EAAO,CAClB,QAAS,SAAS,cAAc,UAAU,EAC1C,KAAM,SAAS,cAAc,aAAa,EAC1C,OAAQ,SAAS,cAAc,SAAS,CAC1C,EAEaC,EAAa,qCAEbC,EAAc,QAEdC,EAAwB,CACnC,QAAS,GACT,eAAgB,EAChB,SAAU,GACV,gBAAiB,SACjB,YAAa,OACb,aAAc,MACd,aAAc,GAChB,EChBMC,EAAW,0BAGV,SAASC,EAAUC,EAAO,CAC/B,MAAMC,EAAS,IAAI,gBAAgB,CACjC,IAAKN,EACL,EAAGK,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EAED,OAAO,MAAM,GAAGF,CAAQ,KAAKG,CAAM,EAAE,EAClC,KAAKC,GAAO,CACX,GAAI,CAACA,EAAI,GACP,MAAM,IAAI,MAAMA,EAAI,UAAU,EAEhC,OAAOA,EAAI,MACjB,CAAK,CACL,CCrBO,SAASC,EAAcC,EAAO,CACjC,OAAOA,EACF,IAAI,CAAC,CAAE,aAAAC,EAAc,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,EAAW,cAAAC,CAAe,IAC1E;AAAA;AAAA,gDAEoCA,CAAa;AAAA,sDACPN,CAAY,UAAUC,CAAI;AAAA;AAAA;AAAA;AAAA,oDAI5BC,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA,oDAKLC,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA,oDAKLC,CAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,oDAKRC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA,OAMpD,EACA,KAAK,EAAE,CAChB,CCxBA,IAAIV,EAAQY,EAAelB,EAAK,IAAI,EAEpCA,EAAK,KAAK,iBAAiB,QAASmB,CAAe,EACnDnB,EAAK,KAAK,iBAAiB,SAAUoB,CAAY,EACjD,MAAMC,EAAiB,IAAIC,EAAe,gBAAiBnB,CAAqB,EAEhF,SAASgB,EAAgBI,EAAG,CAC1BjB,EAAQiB,EAAE,OAAO,MAAM,KAAI,EAC3B,aAAa,QAAQrB,EAAaI,CAAK,CACzC,CAGA,SAASc,EAAaG,EAAG,CACvBA,EAAE,eAAc,EACXjB,IAELN,EAAK,QAAQ,UAAY,GACzBA,EAAK,OAAO,MAAM,QAAU,QAE5BK,EAAUC,CAAK,EACZ,KAAK,CAAC,CAAE,KAAAkB,KAAW,CAClBxB,EAAK,OAAO,MAAM,QAAU,OACxBwB,EAAK,QACPxB,EAAK,QAAQ,UAAYS,EAAce,CAAI,EAC3CH,EAAe,QAAO,GAGtBI,EAAS,QAAQ,CAAE,QAAS,2EAA4E,SAAU,UAAU,CAAE,CAGtI,CAAK,EACA,MAAOC,GAAU,CAChBD,EAAS,MAAM,CAAE,QAAS,+DAAgE,SAAU,UAAU,CAAE,EAChH,QAAQ,MAAMC,CAAK,CACzB,CAAK,EACA,QAAQ,IAAM,CACbpB,EAAQ,GACR,aAAa,WAAWJ,CAAW,EACnCF,EAAK,KAAK,OAChB,CAAK,EACL,CAGA,SAASkB,EAAeS,EAAM,CAC5B,MAAMC,EAAmB,aAAa,QAAQ1B,CAAW,EACzD,GAAK0B,EAEL,OAAAD,EAAK,SAAS,MAAM,MAAQC,EACrBA,GAAoB,EAC7B"}